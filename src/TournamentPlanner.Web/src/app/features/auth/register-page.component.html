<main class="auth-page">
  <section class="auth-card">
    <header>
      <p class="eyebrow">Tournament Planner</p>
      <h1>Create account</h1>
      <p class="subtitle">Start planning and managing tournaments with your team.</p>
    </header>

    <form class="auth-form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="name-grid">
        <label>
          <span>First name</span>
          <input type="text" formControlName="firstName" autocomplete="given-name" />
        </label>

        <label>
          <span>Last name</span>
          <input type="text" formControlName="lastName" autocomplete="family-name" />
        </label>
      </div>

      @if (shouldShowFieldError('firstName') || shouldShowFieldError('lastName')) {
        <p class="field-error">First and last name are required.</p>
      }

      <label>
        <span>Nickname (optional)</span>
        <input type="text" formControlName="nickname" autocomplete="nickname" />
      </label>

      <label>
        <span>Email</span>
        <input
          type="email"
          formControlName="email"
          autocomplete="email"
          placeholder="you@company.com"
        />
      </label>
      @if (shouldShowFieldError('email')) {
        <p class="field-error">Please enter a valid email address.</p>
      }

      <label>
        <span>Password</span>
        <input
          type="password"
          formControlName="password"
          autocomplete="new-password"
          placeholder="••••••••"
        />
      </label>
      @if (shouldShowFieldError('password')) {
        <p class="field-error">Password must be at least 8 characters.</p>
      }

      <label>
        <span>Confirm password</span>
        <input type="password" formControlName="confirmPassword" autocomplete="new-password" />
      </label>
      @if (shouldShowFieldError('confirmPassword')) {
        <p class="field-error">Please confirm your password.</p>
      }
      @if (shouldShowPasswordMismatch()) {
        <p class="field-error">Passwords do not match.</p>
      }

      @if (authStore.error()) {
        <p class="server-error">{{ authStore.error() }}</p>
      }

      <button type="submit" [disabled]="authStore.loading()">
        {{ authStore.loading() ? 'Creating account…' : 'Create account' }}
      </button>
    </form>

    <footer>
      <p>
        Already have an account?
        <a routerLink="/auth/login">Sign in</a>
      </p>
    </footer>
  </section>
</main>
